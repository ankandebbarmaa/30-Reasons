<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reasons I Love You ðŸ’–</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect fill='%23ffd1e1' width='64' height='64' rx='12'/><text x='50%25' y='58%25' text-anchor='middle' font-family='Dancing%20Script,%20Poppins,%20Arial' font-size='28' fill='%23b76e79'>Jiya</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
      :root {
        --pink-1: #ffe1ec;
        --pink-2: #ffd1e1;
        --rose-1: #ffb6c9;
        --rose-2: #f4a3b4;
        --rose-gold: #b76e79;
        --text: #5a3b47;
        --white: #ffffff;
        --shadow: rgba(0,0,0,0.1);
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color: var(--text);
        background: linear-gradient(145deg, var(--pink-1), var(--pink-2));
        overflow-x: hidden;
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
        padding-bottom: max(0px, env(safe-area-inset-bottom));
      }

      /* Floating hearts background */
      .hearts {
        position: fixed;
        inset: 0;
        overflow: hidden;
        z-index: 0;
        pointer-events: none;
      }
      .heart {
        position: absolute;
        width: var(--size);
        height: var(--size);
        background: radial-gradient(circle at 30% 30%, #fff8, #fff0 60%), var(--rose-1);
        transform: rotate(45deg);
        opacity: var(--opacity, 0.7);
        filter: drop-shadow(0 6px 10px var(--shadow));
        animation: floatUp var(--dur) linear infinite;
      }
      .heart::before, .heart::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background: inherit;
        border-radius: 50%;
      }
      .heart::before { left: -50%; }
      .heart::after { top: -50%; }
      @keyframes floatUp {
        0% { transform: translateY(0) rotate(45deg) scale(1); }
        100% { transform: translateY(-120vh) rotate(45deg) scale(1.1); }
      }

      /* Layout */
      .container {
        position: relative;
        z-index: 1;
        min-height: 100dvh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 24px;
        text-align: center;
      }
      header h1 {
        margin: 0 0 4px;
        font-family: 'Dancing Script', cursive;
        font-size: clamp(28px, 6vw, 54px);
        color: var(--rose-gold);
        letter-spacing: 0.5px;
        text-shadow: 0 2px 0 #fff6, 0 10px 20px var(--shadow);
      }
      header p {
        margin: 0 0 24px;
        font-size: clamp(14px, 2.8vw, 18px);
        opacity: 0.9;
      }

      .card {
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid #ffffff;
        border-radius: 20px;
        padding: 20px;
        max-width: 800px;
        width: 100%;
        box-shadow: 0 10px 30px var(--shadow);
        backdrop-filter: blur(6px);
      }

      .message {
        min-height: 88px;
        font-size: clamp(18px, 3.8vw, 26px);
        line-height: 1.4;
        margin: 12px 0 22px;
        color: #7a3f50;
      }
      .message span { display: inline-block; }
      .fade-in { animation: fadeInUp 500ms ease forwards; opacity: 0; }
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(6px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .actions { display: flex; align-items: center; justify-content: center; gap: 14px; }

      .heart-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: linear-gradient(145deg, #ff9bb3, #ff6f96);
        color: var(--white);
        border: none;
        border-radius: 999px;
        padding: 16px 22px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 10px 20px rgba(255, 111, 150, 0.4);
        transition: transform 150ms ease, box-shadow 150ms ease, opacity 200ms ease;
      }
      .heart-btn .fa-heart { filter: drop-shadow(0 4px 8px rgba(255, 111, 150, 0.5)); }
      .heart-btn:hover { transform: translateY(-1px) scale(1.02); box-shadow: 0 12px 24px rgba(255, 111, 150, 0.5); }
      .heart-btn:active { transform: translateY(0) scale(0.98); }
      .heart-btn:disabled { opacity: 0.6; cursor: not-allowed; }

      .counter { font-size: 13px; opacity: 0.7; }

      /* Final message */
      .final {
        display: none;
        margin-top: 18px;
        font-size: clamp(18px, 3.5vw, 24px);
        color: #7a3f50;
      }
      .final.show { display: block; animation: fadeInUp 600ms ease forwards; }

      /* Love letter animation */
      .letter-stage {
        margin-top: 26px;
        display: none;
        align-items: center;
        justify-content: center;
      }
      .letter-stage.show { display: flex; }
      .envelope {
        width: min(320px, 86vw);
        height: min(220px, 58vw);
        position: relative;
        perspective: 1000px;
        filter: drop-shadow(0 12px 24px var(--shadow));
        overflow: visible; /* allow flap to rotate without clipping */
      }
      .env-body {
        position: absolute;
        inset: 0;
        background: linear-gradient(180deg, #fff, #ffe7ee);
        border: 1px solid #ffd6e1;
        border-radius: 12px;
        overflow: hidden;
        z-index: 1;
      }
      .env-flap {
        position: absolute;
        top: 0; left: 0; right: 0;
        height: 55%;
        background: linear-gradient(180deg, #ffdce6, #ffc4d6);
        clip-path: polygon(0 0, 100% 0, 50% 100%);
        transform-origin: top center;
        transform: rotateX(0deg);
        transition: transform 900ms cubic-bezier(.2,.8,.2,1);
        border-bottom: 1px solid #ffbdd2;
        z-index: 3; /* flap sits above letter */
        backface-visibility: hidden;
        transform-style: preserve-3d;
        will-change: transform;
      }
      .seal {
        position: absolute;
        top: 52%; left: 50%;
        transform: translate(-50%, -50%);
        width: 44px; height: 44px;
        background: radial-gradient(circle at 30% 30%, #fff6, #0000 60%), #ff6f96;
        border-radius: 50%;
        box-shadow: 0 6px 16px rgba(255, 111, 150, 0.45);
        display: grid; place-items: center;
        color: #fff;
        z-index: 4;
        transition: opacity 400ms ease, transform 400ms ease;
      }
      .letter {
        position: absolute;
        left: 8%; right: 8%; bottom: 10px;
        height: 65%;
        background: #ffffff;
        border: 1px solid #ffd6e1;
        border-radius: 10px;
        transform: translateY(58%);
        transition: transform 900ms cubic-bezier(.2,.8,.2,1) 200ms;
        padding: 16px;
        overflow: hidden;
        z-index: 2; /* under flap, above body */
      }
      .letter .scroll-viewport { position: relative; width: 100%; height: 100%; overflow: hidden; }
      .letter .scroll-content {
        position: absolute; left: 0; right: 0; bottom: -6px;
        display: grid; gap: 10px;
        transform: translateY(100%);
        padding-right: 4px;
      }
      .letter .scroll-content p {
        margin: 0;
        font-family: 'Dancing Script', cursive;
        font-size: clamp(18px, 5vw, 28px);
        color: var(--rose-gold);
        line-height: 1.35;
        text-align: center;
      }
      @keyframes letterScroll {
        0% { transform: translateY(100%); }
        100% { transform: translateY(0%); }
      }
      .envelope.open .env-flap { transform: rotateX(-180deg); }
      .envelope.open .letter { transform: translateY(-2%); }
      .envelope.open .seal { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
      .envelope.open .scroll-content { animation: letterScroll 28s linear forwards; }

      /* Hidden audio but accessible to screen readers */
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
      audio.hidden-controls { position: absolute; opacity: 0; width: 0; height: 0; }

      /* Small tweaks */
      .hint { font-size: 12px; opacity: 0.6; margin-top: 6px; }
      /* Audio hint */
      .audio-hint {
        position: fixed;
        left: 50%;
        bottom: 16px;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.9);
        color: var(--rose-gold);
        border: 1px solid #ffe0ea;
        border-radius: 999px;
        padding: 8px 14px;
        font-size: 13px;
        box-shadow: 0 8px 18px var(--shadow);
        z-index: 10;
        backdrop-filter: blur(6px);
      }

      @media (max-width: 768px) {
        .container { padding: 18px; }
        .card { padding: 18px; border-radius: 18px; }
        .heart-btn { padding: 16px 22px; font-size: 17px; }
      }
      @media (max-width: 480px) {
        .card { padding: 16px; border-radius: 16px; }
        .message { min-height: 100px; font-size: clamp(17px, 4.4vw, 24px); }
        .actions { gap: 12px; }
        .heart-btn { padding: 16px 20px; font-size: 16px; }
        .envelope { width: min(340px, 92vw); height: min(230px, 62vw); }
      }
    </style>
  </head>
  <body>
    <div class="hearts" aria-hidden="true" id="hearts"></div>

    <main class="container">
      <header>
        <h1 id="title">30 Reasons Why I Love You, <span id="herName">Jiya</span> ðŸ’—</h1>
        <p>Click the heart to reveal a new reason each time.</p>
      </header>

      <section class="card" aria-live="polite">
        <div class="message" id="message"><span class="fade-in">Are you ready? ðŸ’ž</span></div>
        <div class="actions">
          <button id="loveBtn" class="heart-btn">
            <i class="fa-solid fa-heart"></i>
            <span>Show me a reason</span>
          </button>
        </div>
        <div class="counter" id="counter">0 / 30 revealed</div>
        <div class="hint">Sound is on. If you don't hear music, tap the heart once.</div>

        <p class="final" id="finalMsg">But the reason I love you has no limitâ€¦ it will continue till the day we die ðŸ’ž</p>
        <div class="hint" id="envelopeHint" style="display:none;">Tap the envelope to open.</div>

        <div class="letter-stage" id="letterStage">
          <div class="envelope" id="envelope" aria-label="Love letter">
            <div class="env-body"></div>
            <div class="env-flap"></div>
            <div class="seal"><i class="fa-solid fa-heart"></i></div>
            <div class="letter">
              <div class="scroll-viewport">
                <div class="scroll-content">
                  <p>My love for you has no limits.</p>
                  <p>Iâ€™ve been loving you since the very day I met you,</p>
                  <p>and Iâ€™ll keep loving you infinite times over â€”</p>
                  <p>in every heartbeat, in every moment, in every lifetime.</p>
                  <p></p>
                  <p>I know Iâ€™m not perfect,</p>
                  <p>but Iâ€™m trying my best to be the best for you â€”</p>
                  <p>even through this distance, even when you canâ€™t see it.</p>
                  <p></p>
                  <p>No distance, no time, nothing can ever change that.</p>
                  <p></p>
                  <p>Forever yours,</p>
                  <p>Ankan ðŸ’—</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <audio id="bgm" class="hidden-controls" preload="auto" loop autoplay playsinline>
      <source src="music/love.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>
    <span class="sr-only" id="audioDesc">Background romantic music playing.</span>
    <div class="audio-hint" id="audioHint">Tap anywhere to enable music ðŸ”Š</div>

    <script>
      (function() {
        const herNameSpan = document.getElementById('herName');
        const title = document.getElementById('title');
        const message = document.getElementById('message');
        const loveBtn = document.getElementById('loveBtn');
        const counter = document.getElementById('counter');
        const finalMsg = document.getElementById('finalMsg');
        const letterStage = document.getElementById('letterStage');
        const envelope = document.getElementById('envelope');
        const heartsLayer = document.getElementById('hearts');
        const bgm = document.getElementById('bgm');
        const audioHint = document.getElementById('audioHint');

        // Set fixed name without prompt
        herNameSpan.textContent = 'Jiya';
        title.setAttribute('aria-label', '30 Reasons Why I Love You, Jiya');

        // Floating hearts generator
        const isMobile = window.matchMedia('(max-width: 480px)').matches;
        const initialHearts = isMobile ? 12 : 18;
        const heartIntervalMs = isMobile ? 1200 : 800;

        function createHeart() {
          const h = document.createElement('div');
          h.className = 'heart';
          const size = Math.random() * 20 + 10; // 10px - 30px
          const left = Math.random() * 100; // vw
          const dur = Math.random() * 6 + 10; // 10s - 16s
          const delay = Math.random() * 5; // 0 - 5s
          const opacity = Math.random() * 0.4 + 0.3; // 0.3 - 0.7
          h.style.setProperty('--size', size + 'px');
          h.style.left = left + 'vw';
          h.style.bottom = '-40px';
          h.style.animationDuration = dur + 's';
          h.style.animationDelay = delay + 's';
          h.style.setProperty('--opacity', opacity);
          heartsLayer.appendChild(h);
          setTimeout(() => h.remove(), (dur + delay) * 1000);
        }
        // Start a gentle stream of hearts
        for (let i = 0; i < initialHearts; i++) createHeart();
        setInterval(createHeart, heartIntervalMs);

        // Reasons logic (30 total)
        const reasons = [
          'You make even my worst days feel beautiful.',
          'Your smile can fix my whole mood.',
          'You make distance feel a little less heavy',
          'You be you with me, no matter what',
          'Youâ€™re my safe space even through a screen.',
          'You understand my silence.',
          'You laugh at my lame jokes.',
          'You make me want to be a better person.',
          'You\'re my home.',
          'You\'re my forever.',
          'You make me feel like home, even miles away.',
          'You listen to me with your whole heart.',
          'Your voice has the power to calm my entire day.',
          'You know how to make me feel safe.',
          'You turn little moments into memories I treasure.',
          'You make me feel like I can be myself around you',
          'You inspire me to grow and heal.',
          'You make small phone calls feel like a hug',
          'You remember the little details about me.',
          'You never gave up on us even I was wrong.',
          'You make me laugh when I least expect it.',
          'You believe in love the way I do.',
          'You are my favorite story to tell, Jiya.',
          'Youâ€™re my calm after every storm.',
          'You make distance feel smaller with your love.',
          'You understand my flaws and still choose me.',
          'Youâ€™re the one person Iâ€™d choose, in every version of my life',
          'You make time feel worth it.',
          'You are the peace I look for.',
          'You are my forever person, Jiya.'
        ];
        // Sequential order (no shuffle)
        let currentIndex = 0;

        function updateCounter() {
          counter.textContent = `${currentIndex} / ${reasons.length} revealed`;
        }
        updateCounter();

        function showReason(text) {
          message.innerHTML = '';
          const span = document.createElement('span');
          span.className = 'fade-in';
          span.textContent = text;
          message.appendChild(span);
        }

        function handleClick() {
          // attempt to ensure audio is playing (mobile policies)
          try { bgm.play().catch(() => {}); } catch(e) {}

          if (currentIndex >= reasons.length) return;
          showReason(reasons[currentIndex]);
          currentIndex += 1;
          updateCounter();

          if (currentIndex >= reasons.length) {
            // Completed: disable and show final message, reveal envelope (tap to open)
            loveBtn.disabled = true;
            finalMsg.classList.add('show');
            letterStage.classList.add('show');
            const hint = document.getElementById('envelopeHint');
            if (hint) hint.style.display = 'block';
          }
        }

        loveBtn.addEventListener('click', handleClick);

        // Tap envelope to open/close and start scroll animation
        envelope.addEventListener('click', () => {
          envelope.classList.toggle('open');
        });

        // Background music attempt on load; many browsers block until user action
        // Autoplay policy handling: start muted, unmute on first user interaction
        function attemptAutoplayMuted() {
          try {
            bgm.muted = true;
            bgm.volume = 0.0;
            bgm.play().catch(() => {});
          } catch (e) {}
        }
        window.addEventListener('load', () => {
          setTimeout(attemptAutoplayMuted, 200);
        });

        // Also hook first user interaction as a fallback to start audio
        function enableSoundOnGesture() {
          try {
            bgm.muted = false;
            const target = 0.6;
            let v = bgm.volume || 0.0;
            const step = 0.06;
            const id = setInterval(() => {
              v = Math.min(target, v + step);
              bgm.volume = v;
              if (v >= target) clearInterval(id);
            }, 80);
            bgm.play().catch(() => {});
            if (audioHint) audioHint.style.display = 'none';
          } catch (e) {}
          removeGestureListeners();
        }
        function removeGestureListeners() {
          window.removeEventListener('pointerdown', enableSoundOnGesture);
          window.removeEventListener('touchstart', enableSoundOnGesture);
          window.removeEventListener('click', enableSoundOnGesture);
          window.removeEventListener('keydown', enableSoundOnGesture);
          window.removeEventListener('scroll', enableSoundOnGesture);
        }
        window.addEventListener('pointerdown', enableSoundOnGesture, { once: true, passive: true });
        window.addEventListener('touchstart', enableSoundOnGesture, { once: true, passive: true });
        window.addEventListener('click', enableSoundOnGesture, { once: true });
        window.addEventListener('keydown', enableSoundOnGesture, { once: true });
        window.addEventListener('scroll', enableSoundOnGesture, { once: true, passive: true });
      })();
    </script>
  </body>
</html>


